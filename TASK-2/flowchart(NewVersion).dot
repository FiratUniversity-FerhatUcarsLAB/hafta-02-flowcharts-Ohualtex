digraph SepetAkisi {
    rankdir=LR;
    node [shape=rectangle, style=rounded];

    // Temel işlemler
    SepetOlustur -> Sepet [label="yeni sepet"];

    SepeteEkle -> StokKontrolEt;
    SepeteEkle -> StokRezervEt;
    SepeteEkle -> KalemBul;
    SepeteEkle -> ToplamlariGuncelle;

    SepettenCikar -> KalemBul;
    SepettenCikar -> StokRezervIptal;
    SepettenCikar -> ToplamlariGuncelle;

    AdetGuncelle -> KalemBul;
    AdetGuncelle -> StokKontrolEt;
    AdetGuncelle -> ToplamlariGuncelle;

    KuponUygula -> ToplamlariGuncelle;

    ToplamlariGuncelle -> AraToplamHesapla;
    ToplamlariGuncelle -> IndirimHesapla;
    ToplamlariGuncelle -> KargoHesapla;
    ToplamlariGuncelle -> VergiHesapla;

    // Ödeme akışı
    OdemeBaslat -> StokYetersiz;
    OdemeBaslat -> ToplamlariGuncelle;
    OdemeBaslat -> OdemeSaglayiciIsle;
    OdemeBaslat -> SiparisOlustur;
    OdemeBaslat -> SepetiTemizle;
    OdemeBaslat -> StokRezervIptal;

    SiparisOlustur -> StokDus;

    SepetiTemizle -> ToplamlariGuncelle;

    // Görselleştirme
    SepetiGoruntule;
}
